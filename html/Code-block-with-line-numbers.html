<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Prism 白色风格代码块（大字号）</title>

    <!-- Prism core theme (保留 token 颜色) -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css"
      rel="stylesheet"
    />
    <!-- Prism 行号插件样式 -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css"
      rel="stylesheet"
    />

    <style>
      /* 容器样式（圆角矩形、白色背景、简洁阴影） */
      .code-card {
        max-width: 980px;
        margin: 32px auto;
        border-radius: 14px;
        background: #ffffff;
        border: 1px solid #e9e9ee;
        box-shadow: 0 8px 30px rgba(15, 23, 42, 0.06);
        overflow: hidden;
        font-family: Inter, "Helvetica Neue", Helvetica, Arial, sans-serif;
      }

      /* 顶部留白栏 */
      .code-card__top {
        height: 64px; /* 稍微加高，使视觉更平衡 */
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 12px 14px;
        box-sizing: border-box;
        border-bottom: 1px solid #f1f3f5;
        background: linear-gradient(
          180deg,
          rgba(250, 250, 252, 1),
          rgba(255, 255, 255, 1)
        );
      }

      .code-card__top .lang {
        font-size: 14px;
        color: #2b2b34;
        padding-left: 6px;
        font-weight: 600;
        letter-spacing: 0.2px;
      }

      /* 复制按钮（圆角矩形） */
      .copy-btn {
        -webkit-appearance: none;
        appearance: none;
        border: 1px solid #e6e7eb;
        background: #ffffff;
        padding: 8px 12px;
        border-radius: 10px;
        font-size: 14px;
        cursor: pointer;
        box-shadow: 0 2px 8px rgba(12, 18, 20, 0.03);
        color: #0f1724;
      }
      .copy-btn:active {
        transform: translateY(1px);
      }
      .copy-btn:focus {
        outline: 2px solid rgba(16, 100, 255, 0.12);
      }

      /* 代码区域 */
      .code-card__content {
        position: relative;
      }

      /* 覆盖 Prism 的背景为透明（容器负责白底），并增大字号与行高以提高可读性 */
      pre[class*="language-"] {
        margin: 0;
        background: transparent;
        padding: 22px 20px 26px 20px;
        overflow: auto;
        font-size: 15px; /* -> 调大字体 */
        line-height: 1.75; /* -> 增加行高以提高可读性 */
        tab-size: 2;
      }

      /* 行号的字号匹配代码 */
      .line-numbers .line-numbers-rows {
        pointer-events: none;
        color: rgba(15, 23, 33, 0.38);
        font-size: 15px;
        line-height: 1.75;
      }
      .line-numbers .line-numbers-rows > span:before {
        color: rgba(15, 23, 33, 0.38);
      }

      /* 保持底部圆角与容器一致 */
      .code-card pre {
        border-radius: 0 0 14px 14px;
      }

      /* token 色调微调，确保白底下可读 */
      .token.comment,
      .token.prolog,
      .token.doctype,
      .token.cdata {
        color: #6b7280;
        font-style: italic;
      }
      .token.string {
        color: #0f5132;
      }
      .token.keyword {
        color: #0b5394;
        font-weight: 600;
      }
      .token.function {
        color: #0f1724;
      }

      /* 响应式（小屏幕）——仍然比之前大字号 */
      @media (max-width: 560px) {
        .code-card {
          margin: 18px;
        }
        .code-card__top {
          height: 60px;
          padding: 8px 10px;
        }
        .copy-btn {
          padding: 7px 10px;
          font-size: 13px;
        }
        pre[class*="language-"] {
          padding: 16px;
          font-size: 14px;
          line-height: 1.7;
        }
        .line-numbers .line-numbers-rows {
          font-size: 14px;
          line-height: 1.7;
        }
      }

      /* 复制成功提示 */
      .copy-toast {
        position: absolute;
        top: 12px;
        right: 20px;
        background: #111827;
        color: #fff;
        padding: 6px 10px;
        border-radius: 8px;
        font-size: 12px;
        opacity: 0;
        transform: translateY(-6px);
        pointer-events: none;
        transition: opacity 0.2s ease, transform 0.2s ease;
      }
      .copy-toast.show {
        opacity: 1;
        transform: translateY(0);
        pointer-events: auto;
      }
    </style>
  </head>
  <body>
    <div class="code-card" role="region" aria-label="代码块">
      <div class="code-card__top">
        <span class="lang">JavaScript</span>
        <div style="display: flex; gap: 8px; align-items: center">
          <button class="copy-btn" id="copyBtn" aria-label="复制代码">
            复制
          </button>
        </div>
      </div>

      <div class="code-card__content">
        <!-- 复制成功提示 -->
        <div id="copyToast" class="copy-toast" role="status">
          已复制到剪贴板
        </div>

        <!-- Prism 要求 language-xxx 和 line-numbers -->
        <pre
          class="language-javascript line-numbers"
        ><code class="language-javascript">
// 简单的示例：斐波那契
function fib(n) {
  if (n <= 1) return n;
  let a = 0, b = 1;
  for (let i = 2; i <= n; i++) {
    const tmp = a + b;
    a = b;
    b = tmp;
  }
  return b;
}

console.log('fib(10) =', fib(10));
      </code></pre>
      </div>
    </div>

    <!-- Prism JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <!-- Prism 行号插件 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>

    <script>
      // 复制按钮逻辑：取 code 元素的 textContent（不含行号）
      (function () {
        const copyBtn = document.getElementById("copyBtn");
        const codeEl = document.querySelector(".code-card pre code");
        const toast = document.getElementById("copyToast");

        async function showToast(msg = "已复制到剪贴板") {
          toast.textContent = msg;
          toast.classList.add("show");
          setTimeout(() => toast.classList.remove("show"), 1600);
        }

        copyBtn.addEventListener("click", async () => {
          try {
            const text = codeEl.textContent;
            if (navigator.clipboard && navigator.clipboard.writeText) {
              await navigator.clipboard.writeText(text);
            } else {
              // 退回方案：创建 textarea
              const ta = document.createElement("textarea");
              ta.value = text;
              ta.style.position = "fixed";
              ta.style.left = "-9999px";
              document.body.appendChild(ta);
              ta.select();
              document.execCommand("copy");
              document.body.removeChild(ta);
            }
            showToast("已复制到剪贴板");
          } catch (err) {
            showToast("复制失败");
            console.error("copy failed", err);
          }
        });
      })();
    </script>
  </body>
</html>
