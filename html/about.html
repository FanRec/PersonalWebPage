<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>冰窟 | About</title>
    <link rel="stylesheet" href="../css/nav.css" />
    <link rel="stylesheet" href="../css/body.css" />
    <link rel="stylesheet" href="../css/aboutstyle.css" />
    <script type="module" src="../js/fmplayer.js"></script>
    <script type="text/javascript" src="../js/weather.js" defer></script>
    <script type="text/javascript" src="../js/date.js" defer></script>
  </head>
  <body>
    <nav class="homenav">
      <div class="navTitle"><strong>冰窟</strong>|MY PROFILE</div>
      <div class="None"></div>
      <div class="item">
        <a href="../html/home.html">Home</a>
        <ul class="list">
          <li class="itemTwo"><a href="../html/about.html">About</a></li>
          <li class="itemTwo"><a href="../html/blog.html">Blog</a></li>
          <li class="itemTwo"><a href="../html/log.html">Beta/a></li>
        </ul>
      </div>
      <div class="item"><a href="../html/login.html">登录账号Login</a></div>
      <div class="None2"></div>
    </nav>
    <main class="main">
      <!-- <script
        type="text/javascript"
        src="https://cdn.jsdelivr.net/gh/Ukenn2112/UkennWeb@3.0/index/web.js"
      ></script> -->
      <section class="sec">
        <div class="bgImg">
          <div class="center">
            <div class="avatar">
              <div class="headImg"></div>
              <div class="title">
                <h1>Hi</h1>
                <h1>I'm KJ</h1>
              </div>
            </div>
            <div class="oneWord">
              <span>"</span>
              <p class="line typeWriterAnim">123</p>
              <span>"</span>
            </div>
            <div class="icons">
              <a
                class="iconBG"
                data-type="bilibili"
                href="https://bilibili.com"
                target="_blank"
                ><div class="icon"></div>
                <div class="txt">BiliBili</div>
              </a>
              <a
                class="iconBG"
                data-type="github"
                href="https://github.com"
                target="_blank "
              >
                <div class="icon"></div>
                <div class="txt">GitHub</div>
              </a>
              <a
                class="iconBG"
                data-type="csdn"
                href="https://www.csdn.net"
                target="_blank"
              >
                <div class="icon"></div>
                <div class="txt">Csdn</div>
              </a>
              <a class="iconBG" data-type="qq" href="qq://" target="_blank"
                ><div class="icon"></div>
                <div class="txt">QQ</div>
              </a>
              <a
                class="iconBG"
                data-type="wechat"
                href="weixin://"
                target="_blank"
              >
                <div class="icon"></div>
                <div class="txt">WeChat</div>
              </a>
            </div>
          </div>
          <button class="toSec2Btn" onclick="scrollToNextSnap()"></button>
        </div>
      </section>
      <section class="sec">
        <div class="personal-center">
          <div class="left-navigation">
            <div class="navigation">
              <div class="selector" aria-hidden="true">
                <span class="label"></span>
              </div>
              <ul>
                <li class="list" data-label="Panel" name="PanelBtn">
                  <a href="javascript:getWeatherData();getBilibiliData();">
                    <span class="icon">
                      <div class="icon-img" name="panel"></div>
                    </span>
                  </a>
                </li>
                <li class="list" data-label="Information" name="InformationBtn">
                  <a href="javascript:;">
                    <span class="icon">
                      <div class="icon-img" name="information"></div>
                    </span>
                  </a>
                </li>
                <li class="list" data-label="Extension" name="ExtensionBtn">
                  <a href="javascript:;">
                    <span class="icon">
                      <div class="icon-img" name="Extension"></div>
                    </span>
                  </a>
                </li>
                <li class="list" data-label="schedule" name="scheduleBtn">
                  <a href="javascript:;">
                    <span class="icon">
                      <div class="icon-img" name="schedule"></div>
                    </span>
                  </a>
                </li>
                <li class="list" data-label="Other2" name="Other2Btn">
                  <a href="javascript:;">
                    <span class="icon">
                      <div class="icon-img" name="other"></div>
                    </span>
                  </a>
                </li>
              </ul>
            </div>
          </div>
          <div class="right-containter">
            <div class="content">
              <div class="panel" id="panel">
                <section>
                  <div class="panel-head-up">
                    <div class="panel-myname">
                      <h3>咱の主页</h3>
                    </div>
                    <div class="icons">
                      <a
                        class="iconBG"
                        data-type="bilibili"
                        href="https://bilibili.com"
                        target="_blank"
                        ><div class="icon"></div>
                        <div class="txt">BiliBili</div>
                      </a>
                      <a
                        class="iconBG"
                        data-type="github"
                        href="https://github.com"
                        target="_blank "
                      >
                        <div class="icon"></div>
                        <div class="txt">GitHub</div>
                      </a>
                      <a
                        class="iconBG"
                        data-type="csdn"
                        href="https://www.csdn.net"
                        target="_blank"
                      >
                        <div class="icon"></div>
                        <div class="txt">Csdn</div>
                      </a>
                      <a
                        class="iconBG"
                        data-type="qq"
                        href="qq://"
                        target="_blank"
                        ><div class="icon"></div>
                        <div class="txt">QQ</div>
                      </a>
                      <a
                        class="iconBG"
                        data-type="wechat"
                        href="weixin://"
                        target="_blank"
                      >
                        <div class="icon"></div>
                        <div class="txt">WeChat</div>
                      </a>
                    </div>
                    <div class="theme-toggle"></div>
                  </div>
                  <div class="panel-head-down">
                    <div class="panel-avatar-bg">
                      <div class="panel-avatar"></div>
                    </div>
                    <div class="panel-avatar-bg2"></div>
                    <div class="time">
                      <div class="date la" id="date">----/--/--/星期-</div>
                      <div class="clock la" id="clock">--:--:--</div>
                    </div>
                    <div class="weather">
                      <div class="weather-content">
                        <div class="weather-info">
                          <h3>青岛市</h3>
                          <p id="temprature">--°C~--°C</p>
                          <p id="weather-desc">-</p>
                        </div>
                        <div class="weather-icon" id="weather-icon"></div>
                      </div>
                      <div class="weather-detail">
                        <div class="weather-detail-item wind-speed">
                          <div class="weather-detail-icon"></div>
                          <span id="wind-speed">--km/h</span>
                        </div>
                        <div class="weather-detail-item humidity">
                          <div class="weather-detail-icon"></div>
                          <span id="humidity">--%</span>
                        </div>
                      </div>
                    </div>
                    <div class="personal-state">
                      <ul class="states">
                        <li class="state moon">
                          <div class="state-icon"></div>
                          <div class="state-scroll-box">
                            <div class="state-bar"></div>
                          </div>
                          <div class="state-txt"></div>
                        </li>
                        <li class="state health">
                          <div class="state-icon"></div>
                          <div class="state-scroll-box">
                            <div class="state-bar"></div>
                          </div>
                          <div class="state-txt"></div>
                        </li>
                        <li class="state sleep">
                          <div class="state-icon"></div>
                          <div class="state-scroll-box">
                            <div class="state-bar"></div>
                          </div>
                          <div class="state-txt"></div>
                        </li>
                        <li class="state satiety">
                          <div class="state-icon"></div>
                          <div class="state-scroll-box">
                            <div class="state-bar"></div>
                          </div>
                          <div class="state-txt"></div>
                        </li>
                        <li class="state sanity">
                          <div class="state-icon"></div>
                          <div class="state-scroll-box">
                            <div class="state-bar"></div>
                          </div>
                          <div class="state-txt"></div>
                        </li>
                      </ul>
                    </div>
                  </div>
                </section>
                <section>
                  <div class="announcement">
                    <div class="announcement-content">
                      <span class="announcement-icon"></span>
                      <span
                        >因为刚开始学，所以这个页面是屎山代码堆砌的ο(=•ω＜=)ρ⌒☆</span
                      >
                    </div>
                  </div>
                </section>
                <section>
                  <div class="panel-body-grid">
                    <div class="panel-display">
                      <div class="picture">
                        <div class="picture-img"></div>
                      </div>
                      <div class="plan-list">
                        <ul class="plans">
                          <li class="plan">做完这个网站</li>
                          <li class="plan">好好吃饭</li>
                          <li class="plan">好好睡觉</li>
                          <li class="plan">好好学习</li>
                          <li class="plan">好好打游戏</li>
                          <li class="plan">好好看书</li>
                          <li class="plan">好好锻炼身体</li>
                          <li class="plan">好好照顾家人</li>
                          <li class="plan">好好爱自己</li>
                          <li class="plan">好好过日子</li>
                          <li class="plan">好好过好日子</li>
                          <li class="plan">好好过好日子</li>
                          <li class="plan">好好过好日子</li>
                          <li class="plan">好好过好日子</li>
                          <li class="plan">好好过好日子</li>
                        </ul>
                      </div>
                    </div>
                    <div class="panel-data">
                      <div class="analytics">
                        <div class="analytic">
                          <div class="analytic-icon">
                            <div class="icon-img" name="subscriptions"></div>
                          </div>
                          <div class="analytic-info">
                            <h4>Subscriptions</h4>
                            <h1 id="b-follower">
                              55<small
                                class="text-danger"
                                id="b-follower-change"
                                >+0</small
                              >
                            </h1>
                          </div>
                        </div>
                        <div class="analytic">
                          <div class="analytic-icon">
                            <div class="icon-img" name="star"></div>
                          </div>
                          <div class="analytic-info">
                            <h4>Stars</h4>
                            <h1>0<small class="text-danger">+0</small></h1>
                          </div>
                        </div>
                      </div>
                      <div class="graph-card">
                        <div class="luogu"></div>
                      </div>
                    </div>
                  </div>
                </section>
              </div>
              <div class="information hide" id="information">
                <div class="shell">
                  <div class="cover"></div>
                  <div class="head">
                    <div class="data">
                      <div class="title1">
                        软件工程界の初学者<span>QDU</span>
                      </div>
                      <div class="title2">开发热爱者</div>
                    </div>
                  </div>
                  <div class="shell-foot">
                    <div class="tags">
                      <span class="tag">#HTML</span>
                      <span class="tag">#CSS</span>
                      <span class="tag">#JavaScript</span>
                      <span class="tag">#Unity</span>
                      <span class="tag">#CG</span>
                      <span class="tag">#Asprite</span>
                    </div>
                    <div class="introduce">
                      <p>
                        Good morning, my name is KJ. I am 20 years old and I
                        come from Universe. I am currently studying at QDU and
                        my major is software Engine. In my free time, I enjoy
                        Codding.
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
    <fm-player
      playlist-src="../json/playlists/VOCALOID.json"
    ></fm-player>
  </body>
  <script>
    let currentIndex = -1;
    let currentText = "";
    let isDeleting = false;
    function tryGetOneWord() {
      fetch("https://v1.hitokoto.cn/?c=l")
        .then((response) => response.json())
        .then((data) => {
          currentText = data.hitokoto;
        })
        .catch((error) => console.error("Error fetching one word:", error));
    }
    function typeWriter() {
      const oneWordParagraph = document.querySelector(".oneWord .line");
      const textLength = currentText.length;
      oneWordParagraph.textContent = currentText.substring(0, currentIndex + 1);
      if (isDeleting) {
        currentIndex--;
      } else {
        currentIndex++;
      }
      if (currentIndex === textLength) {
        isDeleting = true;
      } else if (currentIndex < -1) {
        tryGetOneWord();
        currentIndex = 0;
        isDeleting = false;
      }
      setTimeout(typeWriter, 300);
    }
    function scrollToNextSnap() {
      const main = document.querySelector(".main");
      const currentScrollTop = main.scrollTop;
      const sections = Array.from(main.querySelectorAll(".sec"));
      const nextSection = sections.find(
        (sec) => sec.offsetTop > currentScrollTop
      );

      if (nextSection) {
        main.scrollTo({
          top: nextSection.offsetTop,
          behavior: "smooth",
        });
      }
    }
    window.onload = typeWriter;

    document.addEventListener("DOMContentLoaded", () => {
      const nav = document.querySelector(".navigation");
      const items = Array.from(nav.querySelectorAll("li.list"));
      const selector = nav.querySelector(".selector");
      const GAP =
        parseFloat(
          getComputedStyle(document.documentElement).getPropertyValue("--gap")
        ) || 8;

      // 1. 获取两个核心面板元素
      const panel = document.getElementById("panel");
      const information = document.getElementById("information");

      if (!items.length) return;

      function moveToItem(li) {
        const top = li.offsetTop;
        selector.style.height = `${li.offsetHeight}px`;
        selector.style.setProperty("--y", `${top}px`);
        selector.style.transform = `translateY(${top}px)`;
      }

      // 2. 给每个导航按钮绑定点击事件（核心切换逻辑在这里）
      items.forEach((li) => {
        li.addEventListener("click", () => {
          // 原有逻辑：导航按钮激活状态切换
          items.forEach((i) => {
            i.classList.remove("active");
            i.querySelector("a").classList.remove("active");
          });
          li.classList.add("active");
          moveToItem(li);
          li.querySelector("a").classList.add("active");

          // 新增逻辑：面板切换（根据按钮name判断切换目标）
          const btnName = li.getAttribute("name"); // 获取当前点击按钮的name属性
          if (btnName === "PanelBtn") {
            // 点击「Panel」按钮：显示Panel，隐藏Information
            panel.classList.remove("hide");
            information.classList.add("hide");
          } else if (btnName === "InformationBtn") {
            // 点击「Information」按钮：显示Information，隐藏Panel
            panel.classList.add("hide");
            information.classList.remove("hide");
          }
        });
      });

      // 初始化：默认激活第一个按钮（Panel），确保Panel显示
      items[0].classList.add("active");
      moveToItem(items[0]);

      window.addEventListener("resize", () => {
        const active = nav.querySelector("li.active");
        if (active) moveToItem(active);
      });

      // 原有初始化逻辑（保持不变）
      setTimeout(() => {
        loopUpdateDate();
        getBilibiliDataByJSONP();
        getWeatherData();
      }, 1000);
    });
  </script>
</html>
